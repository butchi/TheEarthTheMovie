!function b(u,t,c){function h(bb,ub){if(!t[bb]){if(!u[bb]){var tb="function"==typeof require&&require;if(!ub&&tb)return tb(bb,!0);if(i)return i(bb,!0);var cb=new Error("Cannot find module '"+bb+"'");throw cb.code="MODULE_NOT_FOUND",cb}var hb=t[bb]={exports:{}};u[bb][0].call(hb.exports,function(b){var t=u[bb][1][b];return h(t?t:b)},hb,hb.exports,b,u,t,c)}return t[bb].exports}for(var i="function"==typeof require&&require,bb=0;bb<c.length;bb++)h(c[bb]);return h}({1:[function(b,u,t){"use strict";function c(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function b(b,u){for(var t=0;t<u.length;t++){var c=u[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(b,c.key,c)}}return function(u,t,c){return t&&b(u.prototype,t),c&&b(u,c),u}}(),i=function(){function b(u){c(this,b),this.startDate=u.start_date||new Date(-621355968e5),this.endDate=u.end_date||new Date,this.duration=this.endDate.valueOf()-this.startDate.valueOf(),this.$btnPlay=u.$btn_play,this.$slider=u.$slider,this.PlayerState={ENDED:0,PLAYING:1,PAUSED:2},this.$dispatcher=$({}),this._state,this.initialize()}return h(b,[{key:"initialize",value:function(){this.curDate=this.startDate}},{key:"playVideo",value:function(){var b=this;this._state=this.PlayerState.PLAYING,this.triggerStateChange(),this.timerId=setInterval(function(){b.curDate.valueOf()>=b.endDate.valueOf()&&b.stopVideo(),b.curDate=new Date(b.curDate.valueOf()+1e3)},1e3)}},{key:"pauseVideo",value:function(){clearInterval(this.timerId),this._state=this.PlayerState.PAUSED,this.triggerStateChange()}},{key:"stopVideo",value:function(){clearInterval(this.timerId),this._state=this.PlayerState.ENDED,this.triggerStateChange(),this.$btnPlay.addClass("pause"),this.seekTo(this.startDate),this.$slider.val(0)}},{key:"seekTo",value:function(b){this.curDate=b}},{key:"getPlayerState",value:function(){return this._state}},{key:"getCurrentTime",value:function(){return this.curDate}},{key:"getDuration",value:function(){return this.duration}},{key:"triggerStateChange",value:function(){this.$dispatcher.trigger("onStateChange",this._state)}}]),b}();t["default"]=i},{}],2:[function(b,u,t){"use strict";function c(b){return b&&b.__esModule?b:{"default":b}}function h(){ib=document.getElementById("container"),uu=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,2e3),uu.position.z=500,tu=new THREE.Scene,hu=new THREE.Group,tu.add(hu);var b=new THREE.TextureLoader;b.load("/img/land_ocean_ice_cloud_2048.jpg",function(b){var u=new THREE.SphereGeometry(200,20,20),t=new THREE.MeshBasicMaterial({map:b,overdraw:.5}),c=new THREE.Mesh(u,t);hu.add(c)});var u=document.createElement("canvas");u.width=128,u.height=128;var t=u.getContext("2d"),c=t.createRadialGradient(u.width/2,u.height/2,0,u.width/2,u.height/2,u.width/2);c.addColorStop(.1,"rgba(210,210,210,1)"),c.addColorStop(1,"rgba(255,255,255,1)"),t.fillStyle=c,t.fillRect(0,0,u.width,u.height);var h=new THREE.CanvasTexture(u),ub=new THREE.PlaneBufferGeometry(300,300,3,3),tb=new THREE.MeshBasicMaterial({map:h,overdraw:.5}),cb=new THREE.Mesh(ub,tb);cb.position.y=-250,cb.rotation.x=-Math.PI/2,hu.add(cb),cu=new THREE.CanvasRenderer,cu.setClearColor(16777215),cu.setPixelRatio(window.devicePixelRatio),cu.setSize(window.innerWidth,window.innerHeight),ib.appendChild(cu.domElement),bu=new Stats,bu.domElement.style.position="absolute",bu.domElement.style.top="0px",ib.appendChild(bu.domElement),document.addEventListener("mousemove",bb,!1),window.addEventListener("resize",i,!1)}function i(){ct=window.innerWidth/2,ht=window.innerHeight/2,uu.aspect=window.innerWidth/window.innerHeight,uu.updateProjectionMatrix(),cu.setSize(window.innerWidth,window.innerHeight)}function bb(b){ut=b.clientX-ct,tt=b.clientY-ht}function ub(){requestAnimationFrame(ub),tb(),bu.update()}function tb(){uu.position.x+=.05*(ut-uu.position.x),uu.position.y+=.05*(-tt-uu.position.y),uu.lookAt(tu.position),hu.rotation.y-=.005,cu.render(tu,uu)}function cb(b){var u=b.getUTCFullYear()+"年"+(b.getUTCMonth()+1)+"月"+b.getUTCDate()+"日 "+("00"+b.getUTCHours()).slice(-2)+":"+("00"+b.getUTCMinutes()).slice(-2)+":"+("00"+b.getUTCSeconds()).slice(-2);return u}function hb(){var b=it.getCurrentTime();bc=(b.valueOf()-it.startDate.valueOf())/it.duration,hc.text(cb(b)),ic.text(cb(b)),it.getPlayerState()===it.PlayerState.PLAYING&&cc.val(bc),requestAnimationFrame(hb)}var ib,bu,uu,tu,cu,hu,iu=b("./Player"),bt=c(iu),ut=0,tt=0,ct=window.innerWidth/2,ht=window.innerHeight/2;h(),ub();var it,bc,uc=new Date(2016,3,30,22,4,33),tc=new Date(-621355968e5),cc=$(".slider"),hc=$(".face .time time"),ic=$(".controller .time-cur"),bh=$(".controller .time-total"),uh=$(".controller .btn-gotohead"),th=$(".controller .btn-play");requestAnimationFrame(hb),bh.text(cb(uc)),cc.on("input",function(){var b=$(this).val();it.seekTo(new Date(it.startDate.valueOf()+it.duration*b)),hb()}),cc.on("change",function(){it.$dispatcher.trigger("update"),it.seekTo(new Date(tc.valueOf()+(uc.valueOf()-tc.valueOf())*bc))}),th.on("click",function(){var b=$(this);b.hasClass("pause")?(b.removeClass("pause"),it.playVideo()):(b.addClass("pause"),it.pauseVideo())}),uh.on("click",function(){it.seekTo(tc),cc.val(0)}),it=new bt["default"]({start_date:tc,end_date:uc,$btn_play:th,$slider:cc}),it.playVideo(),it.$dispatcher.on("onStateChange",function(b,u){console.log("state:",u)})},{"./Player":1}]},{},[2]);